æ—¢ç„¶ä½ çš„æŠ•ç¥¨ç³»ç»Ÿå·²ç»å¼€å§‹è¿è¡Œï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦ä¸€ä¸ª**â€œæ’è¡Œæ¦œé¡µé¢â€**ï¼Œè®©å¤§å®¶èƒ½çœ‹åˆ°å“ªæŠŠæ­¦å™¨æ˜¯å…¨æœå…¬è®¤çš„â€œæœ€å¼ºâ€ã€‚

æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªæ–‡ä»¶å« rank.htmlï¼ŒåŒæ ·æ”¾åœ¨ä½ çš„ GitHub ä»“åº“é‡Œã€‚

ç¬¬ä¸€æ­¥ï¼šåœ¨æœ¬åœ°æ–°å»º rank.html
åœ¨ä½ çš„ index.html æ‰€åœ¨çš„æ–‡ä»¶å¤¹é‡Œï¼Œæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œæ”¹åä¸º rank.htmlï¼Œç„¶åç²˜è´´ä»¥ä¸‹ä»£ç ï¼š

HTML

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ›è²è‰å¨…æ­¦å™¨ - å®æ—¶å¼ºåº¦æ¦œå•</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; background: #0f172a; color: white; padding: 20px; }
        .rank-table { width: 100%; max-width: 800px; margin: 20px auto; border-collapse: collapse; background: #1e293b; border-radius: 10px; overflow: hidden; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #334155; }
        th { background: #334155; color: #fbbf24; }
        tr:hover { background: #2d3748; }
        .weapon-img { width: 50px; height: 50px; object-fit: contain; background: #000; border-radius: 5px; vertical-align: middle; margin-right: 10px; }
        .win-rate { font-weight: bold; color: #fbbf24; }
        .medals { font-size: 1.2rem; }
    </style>
</head>
<body>
    <h1 style="text-align:center;">ğŸ† èµ›è²è‰å¨…ï¼šæ­¦å™¨å¼ºåº¦æ’è¡Œæ¦œ</h1>
    <p style="text-align:center; color: #94a3b8;">åŸºäºå…¨æœç©å®¶çœŸå®å¯¹æˆ˜æŠ•ç¥¨æ•°æ®ï¼ˆæŒ‰èƒœç‡æ’åï¼‰</p>

    <table class="rank-table">
        <thead>
            <tr>
                <th>æ’å</th>
                <th>æ­¦å™¨</th>
                <th>èƒœåœº / å±•ç¤º</th>
                <th>èƒœç‡</th>
            </tr>
        </thead>
        <tbody id="rank-list">
            </tbody>
    </table>

    <script>
        // ======= ä½ çš„é…ç½®ä¿¡æ¯ (ä¸æŠ•ç¥¨é¡µä¸€è‡´) =======
        const SUPABASE_URL = "https://qdrqekpzaexmkyckhjlw.supabase.co"; 
        const SUPABASE_KEY = "sb_publishable_YivlajEIEQghleyC0hxBYQ_X7AihGf_M4yK03m_Wz-fW-E5T2v-0"; 
        const githubUser = "DFM05";
        const repoName = "Sephira-Weapon-Images";
        // ========================================

        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function loadRank() {
            // ä»æ•°æ®åº“æŠ“å–æ‰€æœ‰æ­¦å™¨æ•°æ®
            const { data, error } = await supabaseClient
                .from('weapons')
                .select('*');

            if (error) {
                console.error(error);
                return;
            }

            // è®¡ç®—èƒœç‡å¹¶æ’åº (èƒœç‡ = èƒœåœº / å±•ç¤ºæ¬¡æ•°)
            const sortedData = data.map(w => {
                const rate = w.total_views > 0 ? (w.votes_won / w.total_views * 100).toFixed(1) : 0;
                return { ...w, rate: parseFloat(rate) };
            }).sort((a, b) => b.rate - a.rate);

            const listBody = document.getElementById('rank-list');
            listBody.innerHTML = '';

            sortedData.forEach((w, index) => {
                let medal = index + 1;
                if(index === 0) medal = "ğŸ¥‡";
                else if(index === 1) medal = "ğŸ¥ˆ";
                else if(index === 2) medal = "ğŸ¥‰";

                const row = `
                    <tr>
                        <td><span class="medals">${medal}</span></td>
                        <td>
                            <img class="weapon-img" src="https://raw.githubusercontent.com/${githubUser}/${repoName}/main/${w.id}.png">
                            ${w.name}
                        </td>
                        <td>${w.votes_won} / ${w.total_views}</td>
                        <td class="win-rate">${w.rate}%</td>
                    </tr>
                `;
                listBody.innerHTML += row;
            });
        }

        loadRank();
    </script>
</body>
</html>